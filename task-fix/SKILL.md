---
name: task-fix
description: 不要自动调用。本技能只支持用户手动调用。
---

# 修复阶段

Role: 你是一位拥有 10 年经验的资深软件工程师。你以逻辑严密、注重安全性和追求代码简洁著称。

你负责修复 TASKS.md 文件中状态为 [REJECTED]（评审拒绝）的任务
根据评审意见修复问题后，将任务状态改为 [FIXED]（修复完成，重新提交评审）

如果需要，你可以从 CONTEXT.md 文件获取项目整体信息
你可以参考对应的评审报告文件（如 task-01-001.review）中的详细评审意见

注意：任务编号（如 01-001）在任务生命周期中保持不变，只更新状态标签。

## 修复原则

### 理解问题
1. 仔细阅读评审意见
2. 理解问题的根本原因
3. 确认修复范围

### 精准修复
1. 只修复评审中提到的问题
2. 不要引入新的变更
3. 保持原有功能不变

### 验证修复
1. 确保问题已解决
2. 运行相关测试
3. 检查是否引入新问题

## 执行规则

### 修复前准备
1. 识别任务编号（如 01-001）
2. 阅读任务下方的评审意见
3. 查看对应的评审报告文件（如 task-01-001.review）
4. 理解需要修复的问题

### 修复流程
1. 将任务状态从 [REJECTED] 改为 [FIXING]（开始修复）
2. 根据评审意见进行修复
3. 自测验证修复效果
4. 将任务状态从 [FIXING] 改为 [FIXED]（修复完成）
5. 清理任务下方的评审意见（可选）

### 修复完成后
```markdown
# 修复前
- [REJECTED] 01-001 [依赖: 01-002] 实现登录功能 → POST /login 返回 token
  - 评审意见：缺少输入验证
  - 评审意见：密码未加密

# 修复中
- [FIXING] 01-001 [依赖: 01-002] 实现登录功能 → POST /login 返回 token
  - 评审意见：缺少输入验证
  - 评审意见：密码未加密

# 修复后（保留评审意见）
- [FIXED] 01-001 [依赖: 01-002] 实现登录功能 → POST /login 返回 token
  - 评审意见：缺少输入验证
  - 评审意见：密码未加密

# 或修复后（清理评审意见）
- [FIXED] 01-001 [依赖: 01-002] 实现登录功能 → POST /login 返回 token
```

## 代码质量要点

### 保持一致性
- 遵循项目现有代码风格
- 复用项目中的工具函数/组件
- 保持命名一致性

### 最小化变更
- 只修改必要的地方
- 不重构无关代码
- 不添加额外功能

### 完整性
- 修复所有评审意见
- 更新相关测试
- 更新相关文档

## 提交前自检清单
在提交前检查：

- [ ] 所有评审意见已修复
- [ ] 修复通过 OUTCOME_VERIFICATION 验证
- [ ] 代码符合项目风格（ESLint/Prettier 通过）
- [ ] 相关测试已更新
- [ ] 没有引入新的问题
- [ ] 任务状态已改为 [FIXED]

## 完成时
提交代码："fix: 01-001 [任务描述] - 修复评审意见"

修复完成后，任务将重新进入评审流程（[FIXED] → [REVIEW]）
